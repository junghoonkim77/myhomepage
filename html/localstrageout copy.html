<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
            
       
       button{
        width : 60px;
       }
       
       .srvalue{
        
        font-size :13px;
       }
       .delkey {
        font-size: 11px;
           }
        a{
            text-decoration: none;
        }
        .contents:hover {
            background-color:rgb(191, 231, 191);
        }
        .container {
            display:grid;
            grid-template-columns: 400px 300px;
        }
    </style>
    <title>로컬아웃풋</title>
</head>
<body>
   
 <div class="container">
  <div class="div1"></div>
  <div class="div2"></div>
 </div>
  
 <script>
    jQuery(function(){
        class LocalObj {
            constructor(_$num,_$localval,_$KEY){
             this.$num = _$num;
             this.$localval =_$localval;
             this.$KEY =_$KEY
            }
        }

        
        var $dblength = localStorage.length;
        var $dbArr =[];
        for ( var localkey in localStorage){
           var $memoDbkey =  localkey.slice(0,4);
           var $numKey = localkey.slice(4,localkey.indexOf('^'));
           var values = localStorage.getItem(localkey);
            if(values !=="" && $memoDbkey=="MEMO"){
             $dbArr.push(new LocalObj($numKey,values,localkey) ) ;
              }  
        } // for문 끝 

            $dbArr.sort((a,b)=>a['$num']-b['$num'])
            
            for ( var i =0 ; i<$dbArr.length; i++){
            $('.div1').
           append(`
            <button class="delkey" data-key="${$dbArr[i].$KEY}">삭제[${i}]</button>
            <div class="srvalue">
            <div style="color:blue;font-weight: bold;">순서[${i}] 제목 :${$dbArr[i].$localval.slice(0,4)}</div>
            <div class="contents" style="cursor:pointer">${$dbArr[i].$localval}</div>
            </div><br>
            `);  
            }
            
            
            
      


        
        var $delkey =$('.delkey');      
         $delkey.click(function(){
            var $delkeyVal = $(this).attr('data-key');
             localStorage.removeItem($delkeyVal);
            location.reload();
        })
         

      

      

        
         var $content = $('.contents');
         $content.click(function(){
         var $thisconTent = $(this).text()
         navigator.clipboard.writeText($thisconTent);
         })

         for ( emptyKey in localStorage){
            if(localStorage.getItem(emptyKey)==""){
                localStorage.removeItem(emptyKey)
            }
            
         }
     })
 </script>

</body>
</html>
