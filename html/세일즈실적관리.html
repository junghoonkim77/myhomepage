<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.4.js" 
    integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js" 
    integrity="sha256-6XMVI0zB8cRzfZjqKcD01PBsAy3FlDASrlC8SxCpInY=" 
    crossorigin="anonymous"></script>

    <style>
        *{
            font-size : 12px;
        }
        .container{
            display : grid;
            grid-template-columns: 2fr 1fr;
            width : 65%;
        }
        table {
            border :  1px solid gray ;
            border-collapse : collapse
   
        }
         td{
            border : 1px solid gray ;
        }
        .control{
            display : flex;
            flex-wrap: wrap;
            width : 250px;
            }
        .control > * {
            flex-basis :100px;
            flex-grow :1;
            flex-direction: row;
         }
        .salesdel {
            cursor : pointer;
        }

        tr:hover{
            background-color: blanchedalmond;
        }
    </style>
    <title>Document</title>
</head>
<body>
    <div class="container">
    <div class="view">
        <table>
            <thead class="thead">
                <td>순번</td>
                <td>번호</td>
                <td>고객명</td>
                <td>가설일자</td>
                <td>설치예정일자</td>
                <td>컨설명</td>
                <td>상품명</td>
                <td>가능성?</td>
                <td>삭제❌</td>
            </thead>
         
        </table>
    </div>
    
    <div class="control">
        <input placeholder="순번" type="text">
        <input placeholder="고객번호" type="text">
        <input placeholder="고객명" type="text">
        <input placeholder="가설일자" type="text">
        <input placeholder="설치예정일"type="text">
        <input placeholder="컨설턴트"type="text">
        <input placeholder="상품종류"type="text">
        <input placeholder="가능성"type="text">
        <input type="button" value="가설 고객추가">
     </div>
    </div>
    <script>
        jQuery(function(){

   
       
    var $salesobj = {};
    var $salesview =[];
    var $salesDelkey =[];
      $('input[type=button]').click(function(){
        $('input[type=text]').each(function(idx){
        var $placehold = $(this).attr('placeholder')
        var $val = $(this).val();
        console.log(idx);
        $salesobj[$placehold ] = $val;
        })
        var $keyName = $('input[type=text]').eq(1).val() ;
        var $keySep = $('input[type=text]').eq(0).val() 
        var  $salesob_str = JSON.stringify ( $salesobj );

        localStorage.setItem(`SA${$keySep}${$keyName }`,$salesob_str);
        location.reload();
             
      }) // 여기까지가 localstorage에 값 저장하기

      for ( k in localStorage){
         if (k.slice(0,2)=="SA"){
          var Keysa =  localStorage.getItem(k);
          var $Keysa = JSON.parse (Keysa );
          $salesview.push($Keysa);
          $salesDelkey.push(k);
         }
      }
       
       
      for ( var i=0 ; i<$salesview.length ; i++){
        $('.thead').before(`<tr class="salesCount">
            <td>${$salesview[i].순번}</td>
            <td>${$salesview[i].고객번호}</td>
            <td>${$salesview[i].고객명}</td>
            <td>${$salesview[i].가설일자}</td>
            <td>${$salesview[i].설치예정일}</td>
            <td>${$salesview[i].컨설턴트}</td>
            <td>${$salesview[i].상품종류}</td>
            <td>${$salesview[i].가능성}</td>
            <td class="salesdel" data-key="${$salesDelkey[i]}">삭제❌</td>
            </tr>`)      
         }  
      
         $('.salesdel').click(function(){
           var $deleteKey = $(this).attr('data-key')
           localStorage.removeItem($deleteKey);
           location.reload();
         }) 

        })
       
    
    </script>
</body>
</html>